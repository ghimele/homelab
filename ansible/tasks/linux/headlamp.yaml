---
- name: Download Headlamp .deb
  ansible.builtin.get_url:
    url: https://github.com/kubernetes-sigs/headlamp/releases/download/v0.34.0/headlamp_0.34.0-1_amd64.deb
    dest: /tmp/headlamp.deb
    mode: '0644'
    force: yes

- name: Install Headlamp
  ansible.builtin.apt:
    deb: /tmp/headlamp.deb
    state: present

- name: Clean up Headlamp .deb
  ansible.builtin.file:
    path: /tmp/headlamp.deb
    state: absent

# - name: Verify Headlamp installation
#   ansible.builtin.command: headlamp --version
#   register: headlamp_check
#   changed_when: false

- name: Display Headlamp version
  ansible.builtin.debug:
    msg: "Headlamp version installed: {{ headlamp_check.stdout }}"
